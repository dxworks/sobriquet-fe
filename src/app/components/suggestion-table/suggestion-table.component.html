<div class="container">
  <p-table [value]="identities"
           [(selection)]="selectedIdentities" dataKey="id" styleClass="p-datatable-customers"
           [rowHover]="true"
           [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]"
           responsiveLayout="scroll"
           [paginator]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
           [filterDelay]="0" [globalFilterFields]="['name','country','representative.name','status']">
    <ng-template pTemplate="caption">
      <div class="d-flex jc-between">
        <div class="mt-5">
          <button class="sortinghat-orange-bg mr-10" mat-button matTooltip="Reject"
                  (click)="rejectMerge()">
            <mat-icon>call_split</mat-icon>
          </button>
          <button class="sortinghat-cyan-bg" mat-button matTooltip="Merge"
                  (click)="onMergeButtonClicked()">
            <mat-icon>merge_type</mat-icon>
          </button>
        </div>
        <div class="flex input-container align-items-center jc-between">
          <mat-icon class="clean-name-icon sortinghat-orange" matTooltip="Sanitize" (click)="cleanName()"> format_size
          </mat-icon>
          <mat-form-field class="mr-10" style="width: 10rem">
            <mat-label>Name</mat-label>
            <input matInput [(ngModel)]="mergeResult.name" style="width: 90%">
            <mat-select [(ngModel)]="name" (ngModelChange)="anonymize()" style="width: 10px">
              <mat-option *ngFor="let character of characters" [value]="character">{{character}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="mr-10" style="width: 10rem">
            <mat-label>Email Address</mat-label>
            <input matInput [(ngModel)]="mergeResult.email">
          </mat-form-field>

          <mat-form-field class="mr-10" style="width: 10rem">
            <mat-label>Username</mat-label>
            <input matInput [(ngModel)]="mergeResult.username">
          </mat-form-field>

          <mat-form-field class="mr-10" style="width: 10rem">
            <mat-label>City</mat-label>
            <input matInput [(ngModel)]="mergeResult.city">
          </mat-form-field>

          <mat-form-field class="mr-10" style="width: 10rem">
            <mat-label>Country</mat-label>
            <input matInput [(ngModel)]="mergeResult.country">
          </mat-form-field>

          <mat-form-field class="mr-10" style="width: 10rem">
            <mat-label>Senority</mat-label>
            <input matInput [(ngModel)]="mergeResult.senority">
          </mat-form-field>
        </div>
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th>
          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
        <th pSortableColumn="firstName">
          <div class="flex jc-between align-items-center">
            First Name
          </div>
        </th>
        <th pSortableColumn="lastName" [colSpan]="0.1">
          <div class="flex jc-start align-items-center">
            Last Name
          </div>
        </th>
        <th pSortableColumn="username">
          <div class="flex jc-between align-items-center">
            Username
          </div>
        </th>
        <th pSortableColumn="email">
          <div class="flex jc-between align-items-center">
            Email
          </div>
        </th>
        <th pSortableColumn="source">
          <div class="flex jc-between align-items-center">
            Source
          </div>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-identity>
      <tr class="p-selectable-row">
        <td>
          <p-tableCheckbox [value]="identity"></p-tableCheckbox>
        </td>
        <td>
          <span class="p-column-title">First Name</span>
          {{identity.firstName}}
        </td>
        <td>
          <span class="p-column-title">Last Name</span>
          <span class="image-text">{{identity.email}}</span>
        </td>
        <td>
          <span class="p-column-title">Username</span>
          <span class="image-text">{{identity.username}}</span>
        </td>
        <td>
          <span class="p-column-title">Email</span>
          {{identity.email}}
        </td>
        <td>
          <span class="p-column-title">Source</span>
          {{identity.source}}
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="8">There are no suggestions for this project.</td>
      </tr>
    </ng-template>
  </p-table>
</div>
